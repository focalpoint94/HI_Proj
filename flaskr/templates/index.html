<!DOCTYPE html>

<html lang="en">

<head>

  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-4.6.2-dist/css/bootstrap-grid.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='bootstrap-4.6.2-dist/css/bootstrap.min.css') }}">
  <!--CSS-->
	<script src="https://kit.fontawesome.com/48517c1904.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="{{ url_for('static', filename='main.css') }}">

</head>

<body>

	<div class="container-fluid">

		<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="navbarNavDropdown">
				<ul class="navbar-nav">
					<li class="nav-item active">
						<a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#about">About</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#implementation">Implementation</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#diagnosis">Diagnosis</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="#references">References</a>
					</li>
				</ul>
			</div>
		</nav>
		
		<div class="sectionLight" id="about">

			<div class="row">
				<div class="col-sm-12">
					<div class="jumbotron jumbotron-fluid">
  					<div class="container">
    					<h1 class="display-4 jumbotronh1">Project: X-ray Diagnosis</h1>
    					<p class="lead alignLeft">
								<br>
								Chest radiography is a commonly employed method for diagnosing respiratory ailments, such as COVID-19 and tuberculosis. Beyond providing an initial assessment of various respiratory conditions, chest X-rays are relatively inexpensive and widely accessible. Nonetheless, despite recent technological advancements, medical professionals must still interpret X-ray images to determine patients' health status. While such procedures may yield accurate diagnoses for experienced practitioners, it requires additional time and effort. Our team contends that machine learning algorithms, particularly those within the subfield of deep learning, offer a promising avenue for improving diagnostic accuracy in chest illnesses and for expediting such procedures.
								<br>
								<br>
								Recent advancements in medical diagnosis have favored deep learning due to its potential to detect various diseases from medical images. Specifically, convolutional neural networks (CNNs) offer significant promise for this particular task since they can learn patterns and features in images that might prove difficult for human interpretation. Our project aims to predict various respiratory ailments, including COVID-19 and tuberculosis, using deep learning techniques on chest X-ray images. Finally, our team developed this web application where users can upload their chest X-ray images for analysis, expanding the reach of diagnostic capabilities beyond solely medical professionals.
								<br>
								<br>
								Our team trained a deep learning model based on x-ray image datasets from Kaggle. Please refer to the below links for details. You may download the test datasets below.
							</p>
  					</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-lg-3"></div>
				<div class="col-sm-12 col-lg-3">
					<div class="container datasets">
						<h5 class="datasets">Datasets</h5>
						<a href="https://www.kaggle.com/datasets/jtiptj/chest-xray-pneumoniacovid19tuberculosis">Link1</a>
						<a href="https://www.kaggle.com/datasets/amanullahasraf/covid19-pneumonia-normal-chest-xray-pa-dataset?datasetId=772726&amp=">Link2</a>
					</div>
				</div>
				<div class="col-sm-12 col-lg-3">
					<div class="container datasets">
						<h5 class="datasets">Test Dataset</h5>
						<a href="static/assets/test.zip" download>Download</a>
					</div>
				</div>
				<div class="col-lg-3"></div>
			</div>

		</div>
		
		<div class="sectionDark" id="implementation">

			<div class="row">
				<div class="col-sm-12">
					<div class="jumbotron jumbotron-fluid">
  					<div class="container">
    					<h1 class="display-4 jumbotronh1">Implementation</h1>
    					<p class="lead alignLeft">
								<br>
								Convolutional neural network, CNN, has been widely successful in computer vision tasks; CNNs can learn and recognize complex patterns and features within images. Transfer learning in [1] refers to using pre-trained models on large datasets as a starting point to solve a particular task with smaller datasets. EfficientNet in [2] is a family of deep convolutional neural networks designed for image classification tasks, achieving state-of-the-art performance while being computationally efficient. Our team added a few more layers and fine-tuned the entire architecture. The model showed a very reasonable performance in identifying diseases in the X-ray images, suggesting the possibility of AI-based diagnosis.
								<br>
								<br>
							</p>
  					</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<div class="container eval">
						<h5>Evaluation Metrics<br>&#40Accuracy : 98%&#41</h5>
						<table class="table">
							<thead>
								<tr>
									<th scope="col"></th>
									<th scope="col">Precision</th>
									<th scope="col">Recall</th>
									<th scope="col">F1-Score</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th scope="row">Normal</th>
									<td>0.96</td>
									<td>0.98</td>
									<td>0.97</td>
								</tr>
								<tr>
									<th scope="row">Covid-19</th>
									<td>1.00</td>
									<td>0.99</td>
									<td>0.99</td>
								</tr>
								<tr>
									<th scope="row">PNEUMONIA</th>
									<td>0.99</td>
									<td>0.96</td>
									<td>0.97</td>
								</tr>
								<tr>
									<th scope="row">TURBERCULOSIS</th>
									<td>1.00</td>
									<td>1.00</td>
									<td>1.00</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<div class="container cm">
						<figure class="figure">
							<img src="static/assets/confusion_matrix.png" class="figure-img img-fluid rounded" alt="...">
							<figcaption class="figure-caption">Confusion Matrix of Test Dataset</figcaption>
						</figure>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-12">
					<div class="container">
						<p class="lead alignLeft">
							<br>
							Convolutional neural network, CNN, has been widely successful in computer vision tasks; CNNs can learn and recognize complex patterns and features within images. Transfer learning in [1] refers to using pre-trained models on large datasets as a starting point to solve a particular task with smaller datasets. EfficientNet in [2] is a family of deep convolutional neural networks designed for image classification tasks, achieving state-of-the-art performance while being computationally efficient. Our team added a few more layers and fine-tuned the entire architecture. The model showed a very reasonable performance in identifying diseases in the X-ray images, suggesting the possibility of AI-based diagnosis.
							<br>
							<br>
						</p>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-lg-4"></div>
				<div class="col-sm-12 col-lg-4">
					<div class="carousel-container">
						<h5 class="gradcam">Grad-Cam on X-rays</h5>
						<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
							<ol class="carousel-indicators">
								<li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
								<li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
							</ol>
							<div class="carousel-inner">
								<div class="carousel-item active">
									<img src="static/assets/gradcam1.png" class="d-block w-100" alt="...">
								</div>
								<div class="carousel-item">
									<img src="static/assets/gradcam2.png" class="d-block w-100" alt="...">
								</div>
								<div class="carousel-item">
									<img src="static/assets/gradcam3.png" class="d-block w-100" alt="...">
								</div>
								<div class="carousel-item">
									<img src="static/assets/gradcam4.png" class="d-block w-100" alt="...">
								</div>
							</div>
							<button class="carousel-control-prev" type="button" data-target="#carouselExampleIndicators" data-slide="prev">
								<span class="carousel-control-prev-icon" aria-hidden="true"></span>
								<span class="sr-only">Previous</span>
							</button>
							<button class="carousel-control-next" type="button" data-target="#carouselExampleIndicators" data-slide="next">
								<span class="carousel-control-next-icon" aria-hidden="true"></span>
								<span class="sr-only">Next</span>
							</button>
						</div>
					</div>
				</div>
				<div class="col-lg-4"></div>
			</div>

		</div>

		<div class="sectionLight" id="diagnosis">

			<div class="row">
				<div class="col-sm-12">
					<div class="jumbotron jumbotron-fluid">
						<div class="container">
							<h1 class="display-4 jumbotronh1">Diagnosis</h1>
						</div>
					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-lg-4"></div>
				<div class="col-sm-12 col-lg-4">
					<div class="container">
						<label class="form-label" for="upload">Upload X-ray</label>
						<form method=post enctype=multipart/form-data class="image">
							<input id="upload" type="file" class="form-control" name="file">
							<input id="submit" type=submit value=Upload>
							{% for message in get_flashed_messages() %}
								<div class="flash">{{ message }}</div>
							{% endfor %}
						</form>
					</div>
				</div>
				<div class="col-lg-4"></div>
				<div class="col-sm-12">
					<div class="container">
						<div id="loading">
							<img id="loading-image" src="static/assets/loader.gif" alt="Loading..." />
						</div>
					</div>
				</div>
			</div>

			{% if image1 %}
			<div id="result-display">
				<div class="row">
					<div class="col-lg-1"></div>
					<div class="col-sm-12 col-lg-4 results">
						<div class="container">
							<h2 class="img">X-ray</h2>
							<img id="imageResult1" src="{{ image1 }}" class="card-img-top" alt="">
						</div>
					</div>
					<div class="col-sm-12 col-lg-2 results">
						<div class="container xray">
							<h2>Prediction: <span>{{ pred }}</span></h2>
							<h2>Probability: <span>{{ prob }}</span></h2>
						</div>
					</div>
					<div class="col-sm-12 col-lg-4 results">
						<div class="container">
							<h2 class="img">Explanation</h2>
							<img id="imageResult2" src="{{ image2 }}" class="card-img-top" alt="">
						</div>
					</div>
					<div class="col-lg-1"></div>
				</div>
			</div>
			{% endif %}

		</div>

		<div class="sectionDark" id="references">
			
			<div class="row">
				<div class="col-sm-12">
					<div class="jumbotron jumbotron-fluid">
  					<div class="container">
    					<h1 class="display-4 jumbotronh1">References</h1>
    					<p class="lead alignLeft">
								<br>
								[1] Weiss, K., Khoshgoftaar, T. M., & Wang, D. (2016). A survey of transfer learning. Journal of Big data, 3(1), 1-40.
								<br>
								<br>
								[2] Koonce, B., & Koonce, B. (2021). EfficientNet. Convolutional Neural Networks with Swift for Tensorflow: Image Recognition and Dataset Categorization, 109-123.
								<br>
								<br>
								[3] Selvaraju, R. R., Cogswell, M., Das, A., Vedantam, R., Parikh, D., & Batra, D. (2017). Grad-cam: Visual explanations from deep networks via gradient-based localization. In Proceedings of the IEEE international conference on computer vision (pp. 618-626).
								<br>
								<br>
							</p>
  					</div>
					</div>
				</div>
			</div>

		</div>
	</div>

	<footer class="footer bg-dark">
		<div class="container-fluid">

			<div class="row">
				<div class="col-sm-12 col-lg-3">
				</div>
				<div class="col-sm-12 col-lg-3">
					<h4 class="footer">Links</h4>
					<div class="container-links">
						<p class="footer"><a href="https://github.com/focalpoint94/HI_PROJ"><i class="fa-brands fa-github"></i></a></p>
						<p class="footer"><a href="https://drive.google.com/drive/folders/1KYmkW2J8DueS7e2o7cWV95G1DvUoWk3l?usp=sharing"><i class="fa-brands fa-google-drive"></i></a></p>
					</div>
				</div>
				<div class="col-sm-12 col-lg-3">
					<h4 class="footer">Contacts</h4>
					<div class="row">
						<div class="col-sm-12 col-lg-6">
							<p class="footer">Hoesu Chun</p>
						</div>
						<div class="col-sm-12 col-lg-6">
							<p class="footer"><a href="mailto:chszerg@gmail.com">hchun33@gatech.edu</a></p>
						</div>
						<div class="col-sm-12 col-lg-6">
							<p class="footer">Yuna Lee</p>
						</div>
						<div class="col-sm-12 col-lg-6">
							<p class="footer"><a href="mailto:ylee847@gatech.edu">ylee847@gatech.edu</a></p>
						</div>
						<div class="col-sm-12 col-lg-6">
							<p class="footer">Yoon Choi</p>
						</div>
						<div class="col-sm-12 col-lg-6">
							<p class="footer"><a href="mailto:jchoi471@gatech.edu">jchoi471@gatech.edu</a></p>
						</div>
					</div>
				</div>
				<div class="col-sm-12 col-lg-3">
				</div>
			</div>
			
		</div>
	</footer>
		
  <!-- jQuery first, then Tether, then Bootstrap JS. -->
  <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
  <script src="{{ url_for('static', filename='bootstrap-4.6.2-dist/js/bootstrap.min.js') }}"></script>

	<script>
		$(window).on('load', function () {
			$('#loading').hide();
		});

		$('#submit').click(function(){
  		$('#loading').show(); //<----here
   	});

	</script>

</body>

</html>